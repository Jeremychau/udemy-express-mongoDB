"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[204],{3204:function(e,t,n){n.r(t);var r=n(5861),a=n(885),i=n(7757),o=n.n(i),u=n(2791),c=n(542),l=n(7196),s=n(6517),f=n(3373),p=n(9978),d=n(5887),v=n(3108),h=n(7656),y=(n(8055),n(9271)),m=n(184);t.default=function(){var e=(0,u.useContext)(v.V),t=(0,d.x)(),n=t.isLoading,i=t.sendReq,x=(0,u.useState)(),g=(0,a.Z)(x,2),b=g[0],C=g[1],w=(0,c.UO)().placeId,E=(0,y.useHistory)(),Z=(0,p.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),j=(0,a.Z)(Z,3),N=j[0],R=j[1],V=j[2];(0,u.useEffect)((function(){var e=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("places/".concat(w),"get");case 3:(t=e.sent)&&(V({title:{value:t.title,isValid:!0},description:{value:t.description,isValid:!0}},!0),C(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[i,w,V]);var k=function(){var t=(0,r.Z)(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,i("/places/".concat(w),"patch",{title:N.inputs.title.value,description:N.inputs.description.value},e.token);case 4:t.sent&&E.push("/".concat(e.userId,"/places")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return b?n?(0,m.jsx)("div",{children:"Loading"}):(0,m.jsxs)("form",{className:"place-form",onSubmit:k,children:[(0,m.jsx)(l.Z,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,h.hg)()],errorText:"Please enter a valid title.",onInput:R,value:b.title,valid:!0}),(0,m.jsx)(l.Z,{id:"description",element:"input",type:"textarea",label:"Description",validators:[(0,h.CP)(5)],errorText:"Please enter a valid description (min 5 characters).",onInput:R,value:b.description,valid:!0}),(0,m.jsx)(s.Z,{type:"submit",disabled:!N.isValid,children:"Update Place"})]}):(0,m.jsx)("div",{className:"center",children:(0,m.jsx)(f.Z,{children:(0,m.jsx)("h2",{children:"Could not find place!"})})})}},7196:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(885),a=n(1413),i=n(2791),o=n(7656),u=n(184),c=function(e,t){switch(t.type){case"CHANGE":return(0,a.Z)((0,a.Z)({},e),{},{value:t.content,isValid:(0,o.Gu)(t.content,t.validators)});case"TOUCH":return(0,a.Z)((0,a.Z)({},e),{},{isTouched:!0});default:return e}},l=function(e){var t={value:e.value||"",isTouched:!1,isValid:e.valid||!1},n=(0,i.useReducer)(c,t),a=(0,r.Z)(n,2),o=a[0],l=a[1],s=function(t){l({type:"CHANGE",content:t.target.value,validators:e.validators})},f=e.id,p=e.onInput,d=o.value,v=o.isValid;(0,i.useEffect)((function(){p(f,d,v)}),[f,d,v,p]);var h=function(){l({type:"TOUCH"})},y="input"===e.element?(0,u.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:s,onBlur:h,value:o.value}):(0,u.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:s,onBlur:h,value:o.value});return(0,u.jsxs)("div",{className:"form-control ".concat(!o.isValid&&o.isTouched&&"form-control--invalid"),children:[(0,u.jsx)("label",{htmlFor:e.id,children:e.label}),y,!o.isValid&&o.isTouched&&(0,u.jsx)("p",{children:e.errorText})]})}},3373:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var r=n(184),a=function(e){return(0,r.jsx)("div",{className:"card ".concat(e.className?e.className:""),style:e.style,children:e.children})}},9978:function(e,t,n){n.d(t,{c:function(){return c}});var r=n(885),a=n(4942),i=n(1413),o=n(2791),u=function(e,t){switch(t.type){case"INPUT_CHANGE":var n=!0;for(var r in e.inputs)e.inputs[r]&&(n=r===t.inputId?n&&t.isValid:n&&e.inputs[r].isValid);return(0,i.Z)((0,i.Z)({},e),{},{inputs:(0,i.Z)((0,i.Z)({},e.inputs),{},(0,a.Z)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:n});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid}}},c=function(e,t){var n=(0,o.useReducer)(u,{inputs:e,formValidity:t}),a=(0,r.Z)(n,2),i=a[0],c=a[1],l=(0,o.useCallback)((function(e,t,n){c({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),s=(0,o.useCallback)((function(e,t){c({type:"SET_DATA",inputs:e,formIsValid:t})}),[]);return[i,l,s]}},5887:function(e,t,n){n.d(t,{x:function(){return d}});var r=n(5861),a=n(885),i=n(7757),o=n.n(i),u=n(2791),c=n(4569),l=n.n(c),s=JSON.parse(localStorage.getItem("userData")),f=l().create({baseURL:"https://udemy-production-mern.herokuapp.com/api/"});f.defaults.headers.common.Authorization=s?"Bearer ".concat(s.token):"",l().defaults.headers.post["Content-Type"]="application/json";var p=f,d=function(){var e=(0,u.useState)(!1),t=(0,a.Z)(e,2),n=t[0],i=t[1],c=(0,u.useState)(null),l=(0,a.Z)(c,2),s=l[0],f=l[1],d=(0,u.useCallback)(function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"get",r=u.length>2&&void 0!==u[2]?u[2]:null,i(!0),e.prev=3,e.next=6,p[n](t,r);case 6:if(a=e.sent){e.next=9;break}throw new Error(a.message);case 9:return i(!1),e.abrupt("return",a.data);case 13:throw e.prev=13,e.t0=e.catch(3),f(e.t0.message||"Something Error"),i(!1),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{isLoading:n,error:s,setError:f,sendReq:d,clearError:function(){f(null)}}}},7656:function(e,t,n){n.d(t,{Ox:function(){return s},CP:function(){return l},hg:function(){return c},Gu:function(){return f}});var r=n(8192);var a="REQUIRE",i="MINLENGTH",o="MAXLENGTH",u="EMAIL",c=function(){return{type:a}},l=function(e){return{type:i,val:e}},s=function(){return{type:u}},f=function(e,t){var n,c=!0,l=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw o}}}}(t);try{for(l.s();!(n=l.n()).done;){var s=n.value;s.type===a&&(c=c&&e.trim().length>0),s.type===i&&(c=c&&e.trim().length>=s.val),s.type===o&&(c=c&&e.trim().length<=s.val),"MIN"===s.type&&(c=c&&+e>=s.val),"MAX"===s.type&&(c=c&&+e<=s.val),s.type===u&&(c=c&&/^\S+@\S+\.\S+$/.test(e))}}catch(f){l.e(f)}finally{l.f()}return c}},542:function(e,t,n){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=n(9271),i=r(n(2791)),o=n(2610);n(2007),n(5501);var u=r(n(6111));function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){e.prototype=Object.create(t.prototype),s(e.prototype.constructor=e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}var p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createBrowserHistory(t.props),t}return l(t,e),t.prototype.render=function(){return i.createElement(a.Router,{history:this.history,children:this.props.children})},t}(i.Component),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createHashHistory(t.props),t}return l(t,e),t.prototype.render=function(){return i.createElement(a.Router,{history:this.history,children:this.props.children})},t}(i.Component),v=function(e,t){return"function"==typeof e?e(t):e},h=function(e,t){return"string"==typeof e?o.createLocation(e,null,null,t):e},y=function(e){return e},m=i.forwardRef;void 0===m&&(m=y);var x=m((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,o=f(e,["innerRef","navigate","onClick"]),u=o.target,l=c({},o,{onClick:function(t){try{a&&a(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return l.ref=y!==m&&t||n,i.createElement("a",l)})),g=m((function(e,t){var n=e.component,r=void 0===n?x:n,l=e.replace,s=e.to,p=e.innerRef,d=f(e,["component","replace","to","innerRef"]);return i.createElement(a.__RouterContext.Consumer,null,(function(e){e||u(!1);var n=e.history,a=h(v(s,e.location),e.location),f=a?n.createHref(a):"",x=c({},d,{href:f,navigate:function(){var t=v(s,e.location),r=o.createPath(e.location)===o.createPath(h(t));(l||r?n.replace:n.push)(t)}});return y!==m?x.ref=t||p:x.innerRef=p,i.createElement(r,x)}))})),b=function(e){return e},C=i.forwardRef;void 0===C&&(C=b);var w=C((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,l=void 0===o?"active":o,s=e.activeStyle,p=e.className,d=e.exact,y=e.isActive,m=e.location,x=e.sensitive,w=e.strict,E=e.style,Z=e.to,j=e.innerRef,N=f(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.createElement(a.__RouterContext.Consumer,null,(function(e){e||u(!1);var n=m||e.location,o=h(v(Z,n),n),f=o.pathname,R=f&&f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),V=R?a.matchPath(n.pathname,{path:R,exact:d,sensitive:x,strict:w}):null,k=!!(y?y(V,n):V),T="function"==typeof p?p(k):p,A="function"==typeof E?E(k):E;k&&(T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(T,l),A=c({},A,s));var I=c({"aria-current":k&&r||null,className:T,style:A,to:o},N);return b!==C?I.ref=t||j:I.innerRef=j,i.createElement(g,I)}))}));Object.defineProperty(t,"UO",{enumerable:!0,get:function(){return a.useParams}})},5501:function(e,t,n){n.r(t);t.default=function(e,t){}},8055:function(){}}]);
//# sourceMappingURL=204.fa3c4822.chunk.js.map